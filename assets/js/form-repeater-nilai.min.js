var FormRepeater=function(){
	return{init:function(){
		$(".mt-repeater").each(function(){
			$(this).repeater({
				show:function(){
					$('.decimal').inputmask({
			            alias:"decimal",
			            digits:2,
			            allowMinus:false    
			        });

					$(".repeater-nilai").each(function(index) {
		                var newIndex = index + 1;
		                $(this).find('.nilaike').text(newIndex);
		                $(this).find('.keteranganke').text(newIndex);
		                $(this).find('.req-nilai').attr('id','nilai-required'+newIndex);
		                $(this).find('.req-ket').attr('id','keterangan-required'+newIndex);
		                $(this).find('.nilai-input').attr('id','nilai'+newIndex);
		                $(this).find('.keterangan-input').attr('id','keterangan'+newIndex);
		            });

		            if($('.repeater-delete').length > 1){
			            $(".repeater-delete").css('display','block');
			        }else{
			            $('.nilaike').text("");
			            $('.keteranganke').text("");
			            $(".repeater-delete").css('display','none');
			        }

			        $('input[id^="nilai"]').on('change', function(e) {
			            if($(this).val() != ""){
			                $('.req-nilai').removeClass('has-error');
			            }
			        });

			        $('select[id^="keterangan"]').on('change', function(e) {
			            if($(this).val() != ""){
			                $('.req-ket').removeClass('has-error');
			            }
			        });

					$(this).slideDown(),$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0})
				},hide:function(e){
					if (confirm("Are you sure you want to delete this element?")) {
						$(this).slideUp(e);

						setTimeout(function() {
							$(".repeater-nilai").each(function(index) {
				                var newIndex = index + 1;
				                $(this).find('.nilaike').text(newIndex);
				                $(this).find('.keteranganke').text(newIndex);
				                $(this).find('.req-nilai').attr('id','nilai-required'+newIndex);
				                $(this).find('.req-ket').attr('id','keterangan-required'+newIndex);
				                $(this).find('.nilai-input').attr('id','nilai'+newIndex);
				                $(this).find('.keterangan-input').attr('id','keterangan'+newIndex);
				            });

				            if($('.repeater-delete').length > 1){
					            $(".repeater-delete").css('display','block');
					        }else{
					            $('.nilaike').text("");
					            $('.keteranganke').text("");
					            $(".repeater-delete").css('display','none');
					        }
				        }, 500);
			        }
				},ready:function(e){
					
				}
			})
		})
	}}
}();

jQuery(document).ready(function(){
	FormRepeater.init();
});